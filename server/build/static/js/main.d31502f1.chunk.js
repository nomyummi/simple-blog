(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{195:function(t,e,n){"use strict";n.r(e);var r=n(1),c=n(0),a=n.n(c),o=n(77),i=n.n(o),s=(n(89),n(28)),u=n(4),b=n(3),d=n.n(b),j=n(5),l=n(7),p=n(9),f=n(10),x=n(16),m=n.n(x);function h(){var t=Object(p.a)(["\n  &:hover {\n    opacity: 0.7;\n  }\n  cursor:pointer;\n"]);return h=function(){return t},t}var O=f.a.div(h());var v=function(t){var e=t.postNumber,n=t.title,c=t.date,a=t.text,o=new Date(c);o=o.toUTCString();var i=Object(u.i)(),s=Object(u.g)();return Object(r.jsxs)(O,{onClick:function(){return function(t){s.push("".concat(i.url,"post/").concat(t))}("".concat(e))},children:[Object(r.jsx)("h1",{children:m.a.decode(String(n))}),Object(r.jsx)("p",{children:o}),Object(r.jsxs)("p",{children:[m.a.decode(String(a.substring(0,Math.min(a.length,200)))),"..."]})]})};var g=function(t){var e=Object(c.useState)([]),n=Object(l.a)(e,2),a=n[0],o=n[1];return Object(c.useEffect)((function(){function t(){return(t=Object(j.a)(d.a.mark((function t(){var e,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api",{method:"GET"});case 2:return e=t.sent,t.next=5,e.json();case 5:n=t.sent,o(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]),Object(r.jsx)("div",{className:"post-list",children:a.map((function(t){return Object(r.jsx)(v,{postNumber:t.postNumber,title:t.title,date:t.date,text:t.text},t._id)}))})},y=n(2);function S(){var t=Object(p.a)(["\n"]);return S=function(){return t},t}var w=f.a.div(S());var k=function(t){var e=t.comment;return Object(r.jsxs)(w,{children:[Object(r.jsx)("h4",{children:m.a.decode("author"in e?String(e.author):"Anonymous")}),Object(r.jsx)("p",{children:new Date(e.date).toUTCString()}),Object(r.jsx)("p",{children:m.a.decode(String(e.text))})]})},N=n(24),T=n(40),C=n(22);function q(){var t=Object(p.a)(['\n  &::before{\n    content: "\u26a0 ";\n  }\n  color: red;\n  margin: 0;\n']);return q=function(){return t},t}function A(){var t=Object(p.a)(["\n  &.error-input-field {\n    background-color: #fff0f2;\n    border-width: 1px;\n    border-color: -internal-light-dark(rgb(118, 118, 118), rgb(133, 133, 133));\n    border-radius: 2px;\n  }\n  font-family: Arial;\n  font-size: 0.85em;\n  display: block;\n"]);return A=function(){return t},t}function E(){var t=Object(p.a)(["\n  font-weight: bold;\n  display: block;\n"]);return E=function(){return t},t}var J=f.a.label(E()),z=f.a.textarea(A()),D=f.a.p(q()),U=C.a().shape({text:C.b().required().max(1e4)});var _=function(t){var e,n=Object(N.b)({resolver:Object(T.yupResolver)(U)}),c=n.register,a=n.handleSubmit,o=n.errors,i=n.reset;return Object(r.jsxs)("form",{onSubmit:a((function(e){t.onSubmit(e),i()})),children:[Object(r.jsx)(J,{children:"Leave a Comment"}),Object(r.jsx)(z,{rows:"10",cols:"100",name:"text",ref:c({required:!0}),className:o.text?"error-input-field":""}),o.text&&Object(r.jsx)(D,{children:null===(e=o.text)||void 0===e?void 0:e.message}),Object(r.jsx)("input",{type:"submit"})]})};var M=function(t){var e=Object(c.useState)([]),n=Object(l.a)(e,2),a=n[0],o=n[1],i=function(){var e=Object(j.a)(d.a.mark((function e(n){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.postNumber=t.postNumber,e.next=3,fetch("/api/post/".concat(t.postNumber),{method:"post",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(n)});case 3:return r=e.sent,e.next=6,r.json();case 6:"errors"in(c=e.sent)?alert(c.errors):o([].concat(Object(y.a)(a),[c]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[t.comments.map((function(t){return Object(r.jsx)(k,{comment:t},t._id)})),a.map((function(t){return Object(r.jsx)(k,{comment:t},t._id)})),Object(r.jsx)(_,{onSubmit:i})]})};function R(){var t=Object(p.a)(["\n  white-space: pre-wrap;\n"]);return R=function(){return t},t}var B=f.a.p(R());var G=function(t){var e=Object(c.useState)({}),n=Object(l.a)(e,2),a=n[0],o=n[1],i=Object(u.h)().postNumber;Object(c.useEffect)((function(){function t(){return(t=Object(j.a)(d.a.mark((function t(){var e;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/post/".concat(i));case 2:return e=t.sent,t.t0=o,t.next=6,e.json();case 6:t.t1=t.sent,(0,t.t0)(t.t1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[]);var s="comments"in a?Object(r.jsx)(M,{comments:a.comments,postNumber:i}):null;return Object(r.jsxs)("div",{className:"post-page",children:[Object(r.jsx)("h1",{children:m.a.decode(String(a.title))}),Object(r.jsx)("p",{children:new Date(a.date).toUTCString()}),Object(r.jsx)(B,{children:m.a.decode(String(a.text))}),s]})};function I(){var t=Object(p.a)(['\n  &::before{\n    content: "\u26a0 ";\n  }\n  color: red;\n  margin: 0;\n']);return I=function(){return t},t}function L(){var t=Object(p.a)(["\n  &.error-input-field {\n    background-color: #fff0f2;\n    border-width: 1px;\n    border-color: -internal-light-dark(rgb(118, 118, 118), rgb(133, 133, 133));\n    border-radius: 2px;\n  }\n  font-family: Arial;\n  font-size: 0.85em;\n  display: block;\n"]);return L=function(){return t},t}function F(){var t=Object(p.a)(["\n  &.error-input-field {\n    background-color:#fff0f2;\n    border-width: 1px;\n    border-color: -internal-light-dark(rgb(118, 118, 118), rgb(133, 133, 133));\n    border-radius: 2px;\n  }\n  font-family: Arial;\n  font-size: 0.85em;\n  display: block;\n"]);return F=function(){return t},t}function H(){var t=Object(p.a)(["\n  display: block;\n"]);return H=function(){return t},t}var K=f.a.label(H()),P=f.a.input(F()),Q=f.a.textarea(L()),V=f.a.p(I()),W=C.a().shape({title:C.b().required().max(1e3),text:C.b().required().max(25e4)});var X=function(t){var e,n,c=Object(N.b)({resolver:Object(T.yupResolver)(W)}),a=c.register,o=c.handleSubmit,i=c.errors,s=Object(u.g)(),b=function(){var t=Object(j.a)(d.a.mark((function t(e){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/post/create",{method:"post",headers:{"Content-Type":"application/json"},mode:"cors",body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:"postNumber"in(r=t.sent)?(c="".concat(r.postNumber),s.push("/post/".concat(c))):alert("Server error");case 7:case"end":return t.stop()}var c}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.jsxs)("form",{onSubmit:o(b),children:[Object(r.jsx)(K,{children:"Title"}),Object(r.jsx)(P,{type:"text",name:"title",ref:a({required:!0}),className:i.title?"error-input-field":""}),i.title&&Object(r.jsx)(V,{children:null===(e=i.title)||void 0===e?void 0:e.message}),Object(r.jsx)(K,{children:"Text"}),Object(r.jsx)(Q,{rows:"12",cols:"100",name:"text",ref:a({required:!0}),className:i.text?"error-input-field":""}),i.text&&Object(r.jsx)(V,{children:null===(n=i.text)||void 0===n?void 0:n.message}),Object(r.jsx)("input",{type:"submit"})]})};var Y=function(){return Object(r.jsx)(s.a,{children:Object(r.jsxs)(u.d,{children:[Object(r.jsx)(u.b,{path:"/post/create",exact:!0,component:X}),Object(r.jsx)(u.b,{path:"/post/:postNumber",exact:!0,component:G}),Object(r.jsx)(u.b,{path:"/",exact:!0,component:g}),Object(r.jsx)(u.a,{to:"/"})]})})};i.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Y,{})}),document.getElementById("root"))},89:function(t,e,n){}},[[195,1,2]]]);
//# sourceMappingURL=main.d31502f1.chunk.js.map